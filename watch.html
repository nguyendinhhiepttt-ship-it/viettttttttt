<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Xem Conan</title>
</head>
<body style="background:black;color:white;text-align:center;">

<h2 id="title"></h2>

<video id="player" controls width="900"></video>

<br><br>
<a href="index.html" style="color:#0ff">← Quay lại</a>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
const params = new URLSearchParams(window.location.search);
const slug = params.get("slug");

fetch("episodes.json")
  .then(res => res.json())
  .then(data => {

    const episodes = data.episodes[0].server_data;
    const episode = episodes.find(ep => ep.slug === slug);

    document.getElementById("title").innerText = episode.name;

    const video = document.getElementById("player");

    if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(episode.link_m3u8);
        hls.attachMedia(video);
    } 
    else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = episode.link_m3u8;
    }

  });
</script>

</body>
</html>
